<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1.0">
    <title>Славянский гейминг</title>
    <link href="reset.css" rel="stylesheet" type="text/css">
    <link href="style.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        var offsetX;
        var offsetY;
        onload = (event) => {
            var canvas = document.getElementById('myCanvas');
            var ctx = canvas.getContext('2d');
            var canvasOffset = $("#myCanvas").offset();
            offsetX = canvasOffset.left;
            offsetY = canvasOffset.top;
            var isDown = false;
            var cx = canvas.width / 2;
            var cy = canvas.height / 2;
            var w;
            var h;
            var r = 0;
            var dr = 0;
            var img = new Image();
            var dx;
            var dy;
            img.src = 'img/colovrat.png';
            img.onload = function () {
                w = img.width;
                h = img.height;
                draw()
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawRotationHandle();
                drawRect();
            }

            function drawRect() {
                ctx.save();
                ctx.translate(cx, cy);
                ctx.rotate(r);
                ctx.drawImage(img, 0, 0, img.width, img.height, -w / 2, -h / 2, w, h);
                ctx.restore();
            }

            function drawRotationHandle() {
                ctx.save();
                ctx.translate(cx, cy);
                ctx.rotate(r);
                ctx.restore();
            }

            function handleMouseDown(e) {
                mouseX = parseInt(e.clientX - offsetX);
                mouseY = parseInt(e.clientY - offsetY);
                drawRotationHandle();
                isDown = true;
            }

            function rotationInertia() {
                if (isDown == false && Math.abs(dr) > 0.001) {
                    r += dr * 10;
                    dr -= (dr > 0 ? 0.001 : -0.001);
                    draw();
                    setTimeout(rotationInertia, 30);
                }
            }

            function handleMouseUp(e) {
                isDown = false;
                rotationInertia();
            }

            function handleMouseOut(e) {
                isDown = false;
                rotationInertia();
            }

            function handleMouseMove(e) {
                if (!isDown) { return; }
                mouseX = parseInt(e.clientX - offsetX);
                mouseY = parseInt(e.clientY - offsetY);
                dx = mouseX - cx;
                dy = mouseY - cy;
                newr = Math.atan2(dy, dx);
                dr = newr - r;
                r = newr;
                draw();
                setTimeout(() => {
                    if (isDown) {
                        dr = 0
                    }
                }, 100)
            }

            $("#myCanvas").mousedown(function (e) { handleMouseDown(e); });
            $("#myCanvas").mousemove(function (e) { handleMouseMove(e); });
            $("#myCanvas").mouseup(function (e) { handleMouseUp(e); });
            $("#myCanvas").mouseout(function (e) { handleMouseOut(e); });
        };

        onresize = (event) => {
            var canvasOffset = $("#myCanvas").offset();
            offsetX = canvasOffset.left;
            offsetY = canvasOffset.top;
        }

    </script>
</head>

<body>
    <div class="wrapper">
        <div class="content">
            <header class="header">
                <div class="header__colovrat">
                    <canvas id="myCanvas" width="53" height="53"></canvas>
                </div>
                <nav class="header__nav">
                    <ul class="header__list">
                        <li class="header__item">
                            <a href="" class="header__link">Вход</a>
                        </li>
                        <li class="header__item">
                            <a href="" class="header__link">Как играть</a>
                        </li>
                        <li class="header__item">
                            <a href="" class="header__link">О нас</a>
                        </li>
                    </ul>
                </nav>
            </header>
            <main class="main">
                <div class="naming__wrapper">
                    <a class="naming">NUIHUETA</a>
                </div>
                <div class="input__rect">
                    <label class="input">
                        <input class="input__field" type="text" placeholder=" " />
                        <span class="input__label">Введите слово</span>
                    </label>
                    <button class="btn">Поехали</button>
                </div>

                <table class="words__table">
                    <thead>
                        <tr>
                            <td>#</td>
                            <td>Слово</td>
                            <td>Схожесть</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Дверь</td>
                            <td>80</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Очко</td>
                            <td>10</td>
                        </tr>
                    </tbody>
                </table>
            </main>
        </div>
    </div>
</body>

</html>